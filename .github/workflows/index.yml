- name: Generate Index
  run: |
    echo "# ðŸ“š InfoSec Prompt Library Index" > index.md
    echo "" >> index.md

    # Governance
    echo "## Governance (master)" >> index.md
    for file in master/*.md; do
      name=$(basename "$file" .md)
      echo "- $name" >> index.md
    done

    # Engines
    echo "" >> index.md
    echo "## Engines" >> index.md
    for file in engines/*.md; do
      name=$(basename "$file" .md)
      echo "- $name" >> index.md
    done

    # Helpers
    echo "" >> index.md
    echo "## Helpers" >> index.md
    for file in helpers/*.md; do
      name=$(basename "$file" .md)
      echo "- $name" >> index.md
    done

    # Roles
    echo "" >> index.md
    echo "## Roles" >> index.md
    for dir in roles/*; do
      role=$(basename "$dir")
      echo "### $role" >> index.md
      for file in "$dir"/*.md; do
        name=$(basename "$file" .md)
        echo "- [$ame" >> index.md
      done
    done

    # Templates
    echo "" >> index.md
    echo "## Templates" >> index.md
    for file in templates/*.md; do
      name=$(basename "$file" .md)
      echo "- [$name >> index.md
    done
